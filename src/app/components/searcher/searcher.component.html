<div class="row">

    <div class="col-md-3 filter-block">
      <form [formGroup]="formSearch" (ngSubmit)="buscar(selectPais)">

        <h4 class="text-center tittle">
          <strong>FILTRO DE BUSQUEDA</strong>
        </h4>

        <div class="formGroup">
          <label>Titulo</label>
          <input type="text" formControlName="titulo" class="form-control mr-1 input" placeholder="Titulo" >
        </div>

        <label>Autor</label>
        <div formArrayName="autores" class="mb-0 pb-0" 
             *ngFor="let item of formSearch.get('autores').controls; let i = index; let isFirst = first;">
          <div [formGroupName]="i" class="form-group input-group">
            <input type="text" formControlName="name" class="form-control mr-1 input" placeholder="Autor Principal" *ngIf="isFirst">
            <input type="text" formControlName="name" class="form-control mr-1 input"  placeholder="Autor Secundario" *ngIf="!isFirst">
            <span class="input-group-btn" *ngIf="!isFirst">
              <i class="fas fa-user-times mt-2" (click)="deleteAutor(i)" style="color:red; cursor: pointer;"></i>
            </span>
          </div>
        </div>
        <div class="mt-0 mb-2">
          <i (click)="addAutorItem()" style="color: black; cursor: pointer;" class="fas fa-user-plus"> </i>
          <span class="ml-1" (click)="addAutorItem()" style="cursor: pointer;" >Añadir autor secundario</span>
        </div>

        <hr>
        <div class="form-group">
          <label for="selectPais">País</label>
          <select  class="selectpicker form-control" id="selectPais" #selectPais data-style="btn" data-live-search="true">
            <optgroup label="América del Norte">
              <option *ngFor="let pais of americaDelNorte" [value]="pais">{{pais}}</option>
            </optgroup>
            <optgroup label="América Central">
              <option *ngFor="let pais of americaCentral" [value]="pais">{{pais}}</option>  
            </optgroup>
            <optgroup label="América del Sur">
              <option *ngFor="let pais of americaDelSur" [value]="pais">{{pais}}</option>
            </optgroup>
          </select>
        </div>
        
        <label>Intervalo de fechas</label>
        <div class="row">
          <div class="col-md-5">
            <input type="text" formControlName="fecha1" class="form-control mr-1 input"  maxlength="4" placeholder="" >
          </div> ---
          <div class="col-md-5">
            <input type="text" formControlName="fecha2" class="form-control mr-1 input" maxlength="4"  placeholder="" >
          </div>
        </div>

        <div class="formGroup">
          <label>Institucion</label>
          <input type="text" formControlName="institucion" class="form-control mr-1 input" placeholder="Institucion" >
        </div>

        <button type="submit" class="btn btn-primary">Buscar</button>
      </form>
    </div>
  
    <div class="col-md-9 "> 
      <div class="text-right">
        <button class="btn btn-warning" (click)="exportarAexcel()"><i class="fas fa-file-excel" style="color:green; cursor: pointer;"></i> Exportar resultados</button>
      </div>
      <div class="card border-oval" *ngFor="let articulo of collection.articulos | paginate: configuracionPaginacion" style="position: relative; margin: 5px;">
        <div class="card-body">
          <h5 class="card-title text-primary">{{articulo.titulo}}</h5>
          <p class="card-subtitle mb-1 text-muted"> <small>{{articulo.autor}} </small></p>
          <p class="card-text">{{articulo.resumen}}</p>
          <p class="card-text text-muted float-left">{{articulo.fecha}}</p>
          <a href="{{articulo.link}}" class="btn btn-primary border-oval pl-4 pr-4 pt-1 float-right">Más</a>
        </div>
      </div>

      <div class="text-center"> <br>
        <!-- <pagination-controls (pageChange)="cambiarPagina($event)"></pagination-controls> -->
        <pagination-template #p="paginationApi" [id]="configuracionPaginacion.id" (pageChange)="cambiarPagina($event)">
          <div class="custom-pagination">
            <div class="pagination-previous" [class.disabled]="p.isFirstPage()">
              <span *ngIf="!p.isFirstPage()" (click)="p.previous()"> <  </span> 
            </div> 
            <div class="page-number" *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
              <span (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">{{ page.label }}</span>
              <div *ngIf="p.getCurrent() === page.value">
                <span>{{ page.label }}</span>
              </div>
            </div>
            <div class="pagination-next" [class.disabled]="p.isLastPage()">
              <span *ngIf="!p.isLastPage()" (click)="p.next()"> > </span>
            </div>
          </div>
        </pagination-template>
      </div>
    </div> 
  
  </div>